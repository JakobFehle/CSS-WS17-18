install.packages("tidyverse")
install.packages("dplyr")
install.packages("readr")

require(tidyverse)
require(dplyr)
library(readr)
source("r scripts/cleanTweetText.R")

twitter_data<-read_csv("data/twitter_data.csv", 
                        locale = locale())

twitter_data_sentiment<-read_delim("data/Twitter_Sentiment_TrainData2.csv", 
                                                                   ";", escape_double = FALSE, trim_ws = TRUE)
twitter_data_sentiment<-twitter_data_sentiment%>%select(-c(Nummer))

# Aufbereiten Twitter Datensatz
twitter_data<-twitter_data%>%filter(lang=="de" | lang == "da")%>%filter(text!=".*\\.{3}")
twitter_data<-twitter_data[!grepl("\\.\\.\\.", twitter_data$text),]
twitter_data<-twitter_data[!grepl("…", twitter_data$text),]

# Aufbereiten für Random Sample
twitter_data<-twitter_data%>%mutate(sentimentScore=NA)
twitter_data$text<-gsub(","," ",twitter_data$text)
twitter_data$text<-gsub(";"," ",twitter_data$text)

# Random Sample
twitter_data_frac<-twitter_data%>%sample_n(1000, replace=FALSE)
twitter_data_frac<-twitter_data_frac%>%select(ID,sentimentScore,text)

write.table(twitter_data_frac, "data/Twitter_Sentiment_TrainData_David3.csv", sep = ",")

